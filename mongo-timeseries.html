
<!-- mongodb config -->

<script type="text/x-red" data-template-name="mongodb">
	<div class="form-row">
		<label for="node-config-input-hostname"><i class="fa fa-bookmark"></i> <span data-i18n="mongodb.label.host"></span></label>
		<input class="input-append-left" type="text" id="node-config-input-hostname" placeholder="localhost" style="width: 40%;" >
		<label for="node-config-input-port" style="margin-left: 10px; width: 35px; "> <span data-i18n="mongodb.label.port"></span></label>
		<input type="text" id="node-config-input-port" style="width:45px">
	</div>
	<div class="form-row">
		<label for="node-config-input-db"><i class="fa fa-database"></i> <span data-i18n="mongodb.label.database"></span></label>
		<input type="text" id="node-config-input-db">
	</div>
	<div class="form-row">
		<label for="node-config-input-user"><i class="fa fa-user"></i> <span data-i18n="mongodb.label.username"></span></label>
		<input type="text" id="node-config-input-user">
	</div>
	<div class="form-row">
		<label for="node-config-input-password"><i class="fa fa-lock"></i> <span data-i18n="mongodb.label.password"></span></label>
		<input type="password" id="node-config-input-password">
	</div>
	<div class="form-row">
		<label for="node-config-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
		<input type="text" id="node-config-input-name" data-i18n="[placeholder]node-red:common.label.name">
	</div>
</script>

<script type="text/javascript">
	RED.nodes.registerType('mongodb', {
		category: 'config',
		color: "rgb(218, 196, 180)",
		defaults: {
			hostname: {value: "127.0.0.1", required: true},
			port: {value: 27017, required: true},
			db: {value: "", required: true},
			name: {value: ""}
		},
		credentials: {
			user: {type: "text"},
			password: {type: "password"}
		},
		label: function() {
			return this.name || this.hostname + ":" + this.port + "/" + this.db;
		}
	});
</script>



<!-- mongodb out -->

<script type="text/x-red" data-template-name="mongodb out">

	<div class="form-row">
		<label for="node-input-mongodb"><i class="fa fa-bookmark"></i> <span data-i18n="mongodb.label.server"></span></label>
		<input type="text" id="node-input-mongodb">
	</div>

	<div class="form-row">
		<label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
		<input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
	</div>

	<div class="form-tips" id="node-warning"><span data-i18n="[html]mongodb.tip"></span></div>
</script>

<script type="text/x-red" data-help-name="mongodb out">
	<p>A simple MongoDB output node. Save data to <b>time-series</b> format in QIoT database.</p>
</script>

<script type="text/javascript">

	RED.nodes.registerType('mongodb out', {
		category: 'QNAP',
		color: "#FF5809",
		defaults: {
			name: {value: ""},
			mongodb: {type: "mongodb", required: true}
		},
		inputs: 1,
		outputs: 0,
		icon: "db.png",
		align: "right",
		paletteLabel: 'QDatabase',
		label: function() {
			return this.name||"qiot-database";;
		},
		oneditprepare: function(){
			var node = this;
		}
	});
</script>


